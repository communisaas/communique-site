{"/Users/noot/Documents/communique/src/lib/stores/popover.ts":{"path":"/Users/noot/Documents/communique/src/lib/stores/popover.ts","statementMap":{"0":{"start":{"line":3,"column":27},"end":{"line":43,"column":1}},"1":{"start":{"line":4,"column":32},"end":{"line":4,"column":46}},"2":{"start":{"line":5,"column":15},"end":{"line":20,"column":3}},"3":{"start":{"line":6,"column":4},"end":{"line":11,"column":7}},"4":{"start":{"line":7,"column":6},"end":{"line":9,"column":7}},"5":{"start":{"line":8,"column":8},"end":{"line":8,"column":52}},"6":{"start":{"line":10,"column":6},"end":{"line":10,"column":38}},"7":{"start":{"line":12,"column":4},"end":{"line":19,"column":28}},"8":{"start":{"line":13,"column":6},"end":{"line":18,"column":9}},"9":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"10":{"start":{"line":15,"column":10},"end":{"line":15,"column":39}},"11":{"start":{"line":17,"column":8},"end":{"line":17,"column":23}},"12":{"start":{"line":21,"column":16},"end":{"line":28,"column":3}},"13":{"start":{"line":22,"column":4},"end":{"line":27,"column":7}},"14":{"start":{"line":23,"column":6},"end":{"line":25,"column":7}},"15":{"start":{"line":24,"column":8},"end":{"line":24,"column":48}},"16":{"start":{"line":26,"column":6},"end":{"line":26,"column":21}},"17":{"start":{"line":29,"column":17},"end":{"line":36,"column":3}},"18":{"start":{"line":30,"column":4},"end":{"line":35,"column":7}},"19":{"start":{"line":31,"column":6},"end":{"line":33,"column":7}},"20":{"start":{"line":32,"column":8},"end":{"line":32,"column":20}},"21":{"start":{"line":34,"column":6},"end":{"line":34,"column":21}},"22":{"start":{"line":37,"column":2},"end":{"line":42,"column":4}},"23":{"start":{"line":44,"column":23},"end":{"line":44,"column":43}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":27},"end":{"line":3,"column":28}},"loc":{"start":{"line":3,"column":33},"end":{"line":43,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":5,"column":15},"end":{"line":5,"column":16}},"loc":{"start":{"line":5,"column":23},"end":{"line":20,"column":3}},"line":5},"2":{"name":"(anonymous_2)","decl":{"start":{"line":6,"column":11},"end":{"line":6,"column":12}},"loc":{"start":{"line":6,"column":24},"end":{"line":11,"column":5}},"line":6},"3":{"name":"(anonymous_3)","decl":{"start":{"line":12,"column":27},"end":{"line":12,"column":28}},"loc":{"start":{"line":12,"column":33},"end":{"line":19,"column":5}},"line":12},"4":{"name":"(anonymous_4)","decl":{"start":{"line":13,"column":13},"end":{"line":13,"column":14}},"loc":{"start":{"line":13,"column":26},"end":{"line":18,"column":7}},"line":13},"5":{"name":"(anonymous_5)","decl":{"start":{"line":21,"column":16},"end":{"line":21,"column":17}},"loc":{"start":{"line":21,"column":24},"end":{"line":28,"column":3}},"line":21},"6":{"name":"(anonymous_6)","decl":{"start":{"line":22,"column":11},"end":{"line":22,"column":12}},"loc":{"start":{"line":22,"column":24},"end":{"line":27,"column":5}},"line":22},"7":{"name":"(anonymous_7)","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":18}},"loc":{"start":{"line":29,"column":25},"end":{"line":36,"column":3}},"line":29},"8":{"name":"(anonymous_8)","decl":{"start":{"line":30,"column":11},"end":{"line":30,"column":12}},"loc":{"start":{"line":30,"column":24},"end":{"line":35,"column":5}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":6},"end":{"line":9,"column":7}},"type":"if","locations":[{"start":{"line":7,"column":6},"end":{"line":9,"column":7}},{"start":{},"end":{}}],"line":7},"1":{"loc":{"start":{"line":7,"column":10},"end":{"line":7,"column":69}},"type":"binary-expr","locations":[{"start":{"line":7,"column":10},"end":{"line":7,"column":17}},{"start":{"line":7,"column":21},"end":{"line":7,"column":38}},{"start":{"line":7,"column":42},"end":{"line":7,"column":69}}],"line":7},"2":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},{"start":{},"end":{}}],"line":14},"3":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":61}},"type":"binary-expr","locations":[{"start":{"line":14,"column":12},"end":{"line":14,"column":30}},{"start":{"line":14,"column":34},"end":{"line":14,"column":61}}],"line":14},"4":{"loc":{"start":{"line":23,"column":6},"end":{"line":25,"column":7}},"type":"if","locations":[{"start":{"line":23,"column":6},"end":{"line":25,"column":7}},{"start":{},"end":{}}],"line":23},"5":{"loc":{"start":{"line":23,"column":10},"end":{"line":23,"column":99}},"type":"binary-expr","locations":[{"start":{"line":23,"column":10},"end":{"line":23,"column":17}},{"start":{"line":23,"column":21},"end":{"line":23,"column":38}},{"start":{"line":23,"column":43},"end":{"line":23,"column":67}},{"start":{"line":23,"column":71},"end":{"line":23,"column":98}}],"line":23},"6":{"loc":{"start":{"line":31,"column":6},"end":{"line":33,"column":7}},"type":"if","locations":[{"start":{"line":31,"column":6},"end":{"line":33,"column":7}},{"start":{},"end":{}}],"line":31},"7":{"loc":{"start":{"line":31,"column":10},"end":{"line":31,"column":69}},"type":"binary-expr","locations":[{"start":{"line":31,"column":10},"end":{"line":31,"column":17}},{"start":{"line":31,"column":21},"end":{"line":31,"column":38}},{"start":{"line":31,"column":42},"end":{"line":31,"column":69}}],"line":31}},"s":{"0":1,"1":1,"2":1,"3":18,"4":18,"5":1,"6":17,"7":18,"8":18,"9":18,"10":17,"11":1,"12":1,"13":19,"14":19,"15":12,"16":7,"17":1,"18":15,"19":15,"20":12,"21":3,"22":1,"23":1},"f":{"0":1,"1":18,"2":18,"3":18,"4":18,"5":19,"6":19,"7":15,"8":15},"b":{"0":[1,17],"1":[18,5,3],"2":[17,1],"3":[18,17],"4":[12,7],"5":[19,17,16,5],"6":[12,3],"7":[15,14,12]},"inputSourceMap":{"version":3,"sources":["/Users/noot/Documents/communique/src/lib/stores/popover.ts"],"sourcesContent":["import { writable, get } from 'svelte/store';\nimport { coordinated } from '$lib/utils/timerCoordinator';\n\ninterface Popover {\n\tid: string;\n\tstate: 'opening' | 'open' | 'closing' | 'closed';\n}\n\nconst createPopoverStore = () => {\n\tconst { subscribe, update } = writable<Popover | null>(null);\n\n\tconst open = (id: string) => {\n\t\tupdate((current) => {\n\t\t\tif (current && current.id !== id && current.state !== 'closing') {\n\t\t\t\t// Close the current popover before opening the new one\n\t\t\t\treturn { id: current.id, state: 'closing' };\n\t\t\t}\n\t\t\treturn { id, state: 'opening' };\n\t\t});\n\n\t\t// A short delay to allow the closing animation of the previous popover\n\t\tcoordinated.transition(() => {\n\t\t\tupdate((current) => {\n\t\t\t\tif (current?.id === id && current.state === 'opening') {\n\t\t\t\t\treturn { id, state: 'open' };\n\t\t\t\t}\n\t\t\t\treturn current;\n\t\t\t});\n\t\t}, 50, `popover_${id}`);\n\t};\n\n\tconst close = (id: string) => {\n\t\tupdate((current) => {\n\t\t\tif (current && current.id === id && (current.state === 'open' || current.state === 'opening')) {\n\t\t\t\treturn { ...current, state: 'closing' };\n\t\t\t}\n\t\t\treturn current;\n\t\t});\n\t};\n\n\tconst closed = (id: string) => {\n\t\tupdate((current) => {\n\t\t\tif (current && current.id === id && current.state === 'closing') {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn current;\n\t\t});\n\t};\n\n\treturn {\n\t\tsubscribe,\n\t\topen,\n\t\tclose,\n\t\tclosed\n\t};\n};\n\nexport const popover = createPopoverStore();"],"mappings":"AAAA,SAAS,UAAU,WAAW;AAC9B,SAAS,mBAAmB;AAO5B,MAAM,qBAAqB,MAAM;AAChC,QAAM,EAAE,WAAW,OAAO,IAAI,SAAyB,IAAI;AAE3D,QAAM,OAAO,CAAC,OAAe;AAC5B,WAAO,CAAC,YAAY;AACnB,UAAI,WAAW,QAAQ,OAAO,MAAM,QAAQ,UAAU,WAAW;AAEhE,eAAO,EAAE,IAAI,QAAQ,IAAI,OAAO,UAAU;AAAA,MAC3C;AACA,aAAO,EAAE,IAAI,OAAO,UAAU;AAAA,IAC/B,CAAC;AAGD,gBAAY,WAAW,MAAM;AAC5B,aAAO,CAAC,YAAY;AACnB,YAAI,SAAS,OAAO,MAAM,QAAQ,UAAU,WAAW;AACtD,iBAAO,EAAE,IAAI,OAAO,OAAO;AAAA,QAC5B;AACA,eAAO;AAAA,MACR,CAAC;AAAA,IACF,GAAG,IAAI,WAAW,EAAE,EAAE;AAAA,EACvB;AAEA,QAAM,QAAQ,CAAC,OAAe;AAC7B,WAAO,CAAC,YAAY;AACnB,UAAI,WAAW,QAAQ,OAAO,OAAO,QAAQ,UAAU,UAAU,QAAQ,UAAU,YAAY;AAC9F,eAAO,EAAE,GAAG,SAAS,OAAO,UAAU;AAAA,MACvC;AACA,aAAO;AAAA,IACR,CAAC;AAAA,EACF;AAEA,QAAM,SAAS,CAAC,OAAe;AAC9B,WAAO,CAAC,YAAY;AACnB,UAAI,WAAW,QAAQ,OAAO,MAAM,QAAQ,UAAU,WAAW;AAChE,eAAO;AAAA,MACR;AACA,aAAO;AAAA,IACR,CAAC;AAAA,EACF;AAEA,SAAO;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACD;AAEO,aAAM,UAAU,mBAAmB;","names":[]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a8347072c5a3db32ed3d8fef7e086553cd9723d8"}}