{"/Users/noot/Documents/communique/src/routes/api/user/templates/+server.ts":{"path":"/Users/noot/Documents/communique/src/routes/api/user/templates/+server.ts","statementMap":{"0":{"start":{"line":3,"column":19},"end":{"line":21,"column":1}},"1":{"start":{"line":4,"column":2},"end":{"line":20,"column":3}},"2":{"start":{"line":5,"column":20},"end":{"line":5,"column":48}},"3":{"start":{"line":6,"column":4},"end":{"line":8,"column":5}},"4":{"start":{"line":7,"column":6},"end":{"line":7,"column":62}},"5":{"start":{"line":9,"column":26},"end":{"line":16,"column":6}},"6":{"start":{"line":17,"column":4},"end":{"line":17,"column":31}},"7":{"start":{"line":19,"column":4},"end":{"line":19,"column":73}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":19},"end":{"line":3,"column":20}},"loc":{"start":{"line":3,"column":41},"end":{"line":21,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":4},"end":{"line":8,"column":5}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":8,"column":5}},{"start":{},"end":{}}],"line":6}},"s":{"0":1,"1":10,"2":10,"3":9,"4":2,"5":7,"6":6,"7":2},"f":{"0":10},"b":{"0":[2,7]},"inputSourceMap":{"version":3,"sources":["/Users/noot/Documents/communique/src/routes/api/user/templates/+server.ts"],"sourcesContent":["import { json } from '@sveltejs/kit';\nimport { db } from '$lib/server/db';\nimport type { RequestHandler } from './$types';\n\nexport const GET: RequestHandler = async ({ locals }) => {\n\ttry {\n\t\tconst session = await locals.auth.validate();\n\t\tif (!session?.user) {\n\t\t\treturn json({ error: 'Unauthorized' }, { status: 401 });\n\t\t}\n\n\t\tconst userTemplates = await db.template.findMany({\n\t\t\twhere: {\n\t\t\t\tuserId: session.user.id\n\t\t\t},\n\t\t\torderBy: {\n\t\t\t\tupdatedAt: 'desc'\n\t\t\t}\n\t\t});\n\n\t\treturn json(userTemplates);\n\t} catch (error) {\n\t\treturn json({ error: 'Failed to fetch templates' }, { status: 500 });\n\t}\n}; "],"mappings":"AAAA,SAAS,YAAY;AACrB,SAAS,UAAU;AAGZ,aAAM,MAAsB,OAAO,EAAE,OAAO,MAAM;AACxD,MAAI;AACH,UAAM,UAAU,MAAM,OAAO,KAAK,SAAS;AAC3C,QAAI,CAAC,SAAS,MAAM;AACnB,aAAO,KAAK,EAAE,OAAO,eAAe,GAAG,EAAE,QAAQ,IAAI,CAAC;AAAA,IACvD;AAEA,UAAM,gBAAgB,MAAM,GAAG,SAAS,SAAS;AAAA,MAChD,OAAO;AAAA,QACN,QAAQ,QAAQ,KAAK;AAAA,MACtB;AAAA,MACA,SAAS;AAAA,QACR,WAAW;AAAA,MACZ;AAAA,IACD,CAAC;AAED,WAAO,KAAK,aAAa;AAAA,EAC1B,SAAS,OAAO;AACf,WAAO,KAAK,EAAE,OAAO,4BAA4B,GAAG,EAAE,QAAQ,IAAI,CAAC;AAAA,EACpE;AACD;","names":[]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"047081716263ccc3920f20eac9cfa1604b315ade"}}