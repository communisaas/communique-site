name = "communique"
compatibility_date = "2025-04-01"
compatibility_flags = ["nodejs_compat", "nodejs_als"]
pages_build_output_dir = ".svelte-kit/cloudflare"

[vars]
PUBLIC_SCROLL_RPC_URL = "https://rpc.scroll.io"
# IDENTITY_SIGNING_KEY = "set in Cloudflare dashboard (openssl rand -hex 32)"

# Secrets (set via `npx wrangler pages secret put <KEY> --project-name communique-site`):
#
# CWC Congressional Delivery:
#   CWC_API_KEY              - Senate CWC API key (soapbox.senate.gov)
#   CWC_PRODUCTION           - Set to "true" for live Senate delivery (default: testing endpoint)
#   GCP_PROXY_URL            - House CWC proxy base URL (e.g., https://35.209.173.125)
#   GCP_PROXY_AUTH_TOKEN     - Bearer token for the GCP proxy
#
# Identity & Security:
#   IDENTITY_SIGNING_KEY     - Ed25519 signing key for district credentials
#   JWT_SECRET               - Session token signing
#   IDENTITY_HASH_SALT       - Sybil-resistant identity hashing
#
# AI Services:
#   GEMINI_API_KEY           - Gemini API for agents
#   OPENAI_API_KEY           - Embeddings and scope extraction
#   GROQ_API_KEY             - Llama Guard safety moderation

[[hyperdrive]]
binding = "HYPERDRIVE"
id = "870ed0ebca654838bc0df0d83c4e2645"

# DC_SESSION_KV: KV namespace for DC (district-confirmed) session state
# Used to store ephemeral session data during the congressional contact flow
# Create the namespace before deploying:
#   npx wrangler kv namespace create DC_SESSION_KV
# Then replace the id below with the output namespace ID
[[kv_namespaces]]
binding = "DC_SESSION_KV"
id = "a76f18d2c07042bc856a30038af05ab8"
